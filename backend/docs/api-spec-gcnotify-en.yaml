components:
  schemas:
    CreateEmailNotificationRequest:
      properties:
        email_address:
          description: Email address of the recipient
          format: email
          type: string
        email_reply_to_id:
          $ref: '#/components/schemas/UUID'
          description: ID of the reply-to address to use
        personalisation:
          additionalProperties:
            oneOf:
            - description: Template variable value
              type: string
            - $ref: '#/components/schemas/FileAttachment'
          description: Variables to substitute in the template and optional file attachments
          type: object
        reference:
          description: Optional reference identifier
          type: string
        scheduled_for:
          description: Schedule notification for future delivery
          format: date-time
          nullable: true
          type: string
        template_id:
          $ref: '#/components/schemas/UUID'
          description: ID of the template to use
      required:
      - email_address
      - template_id
      type: object
    CreateSmsNotificationRequest:
      properties:
        personalisation:
          additionalProperties:
            oneOf:
            - description: Template variable value
              type: string
          description: Variables to substitute in the template
          type: object
        phone_number:
          description: Phone number of the recipient
          type: string
        reference:
          description: Optional reference identifier
          type: string
        scheduled_for:
          description: Schedule notification for future delivery
          format: date-time
          nullable: true
          type: string
        sms_sender_id:
          $ref: '#/components/schemas/UUID'
          description: ID of the SMS sender to use
        template_id:
          $ref: '#/components/schemas/UUID'
          description: ID of the template to use
      required:
      - phone_number
      - template_id
      type: object
    EmailContent:
      properties:
        body:
          description: Email body content
          type: string
        from_email:
          description: From email address
          format: email
          type: string
        subject:
          description: Email subject line
          type: string
      required:
      - from_email
      - body
      - subject
      type: object
    Error:
      properties:
        message:
          description: Description of the error
          type: string
        result:
          description: Response result
          type: string
      required:
      - result
      - message
      type: object
    FileAttachment:
      example:
        file: base64encodedfilecontenthere
        filename: document.pdf
        sending_method: attach
      properties:
        file:
          description: File content as base64 encoded string
          type: string
        filename:
          description: Custom filename for the attachment
          type: string
        sending_method:
          description: How the file should be sent - as attachment or as a link
          enum:
          - attach
          - link
          type: string
      required:
      - file
      - filename
      - sending_method
      type: object
    Links:
      properties:
        current:
          description: The link to the current page
          type: string
        next:
          description: The link to the next page
          type: string
      required:
      - current
      type: object
    Notification:
      properties:
        body:
          type: string
        completed_at:
          format: date-time
          nullable: true
          type: string
        created_at:
          format: date-time
          type: string
        created_by_name:
          nullable: true
          type: string
        email_address:
          format: email
          nullable: true
          type: string
        id:
          $ref: '#/components/schemas/UUID'
        line_1:
          nullable: true
          type: string
        line_2:
          nullable: true
          type: string
        line_3:
          nullable: true
          type: string
        line_4:
          nullable: true
          type: string
        line_5:
          nullable: true
          type: string
        line_6:
          nullable: true
          type: string
        phone_number:
          nullable: true
          type: string
        postage:
          nullable: true
          type: string
        postcode:
          nullable: true
          type: string
        provider_response:
          nullable: true
          type: string
        reference:
          nullable: true
          type: string
        scheduled_for:
          format: date-time
          nullable: true
          type: string
        sent_at:
          format: date-time
          nullable: true
          type: string
        status:
          enum:
          - created
          - sending
          - pending
          - delivered
          - permanent-failure
          - temporary-failure
          - technical-failure
          - pending-virus-check
          - virus-scan-failed
          type: string
        status_description:
          enum:
          - In transit
          - In transit
          - In transit
          - Delivered
          - Blocked
          - No such number
          - No such address
          - Content or inbox issue
          - Carrier issue
          - Tech issue
          - In transit
          - Attachment has virus
          type: string
        subject:
          nullable: true
          type: string
        template:
          $ref: '#/components/schemas/NotificationTemplate'
        type:
          enum:
          - sms
          - email
          type: string
      type: object
    NotificationResponse:
      properties:
        content:
          description: Content of the notification
          oneOf:
          - $ref: '#/components/schemas/EmailContent'
          - $ref: '#/components/schemas/SmsContent'
        id:
          $ref: '#/components/schemas/UUID'
          description: Unique identifier for the notification
        reference:
          description: Reference identifier provided when creating the notification
          nullable: true
          type: string
        scheduled_for:
          description: When the notification is scheduled to be sent
          format: date-time
          nullable: true
          type: string
        template:
          $ref: '#/components/schemas/NotificationTemplate'
        uri:
          description: URI to retrieve the notification
          format: uri
          type: string
      required:
      - id
      - content
      - uri
      - template
      type: object
    NotificationTemplate:
      properties:
        id:
          $ref: '#/components/schemas/UUID'
        uri:
          format: uri
          type: string
        version:
          type: integer
      required:
      - id
      - version
      - uri
      type: object
    PostBulkRequest:
      properties:
        csv:
          description: If you prefer to pass the content of CSV files instead of rows
            in the rows argument, you can do so. Pass the full content of your CSV
            file in a key named csv. Do not include the rows argument.
          example: 'email address,name

            alice@example.com,Alice'
          format: binary
          type: string
        name:
          description: The name of your bulk sending job. Used to identify this bulk
            of notifications later on.
          example: January Appointment Reminders
          type: string
        reference:
          description: A reference for this batch
          example: batch-reference-123
          type: string
        reply_to_id:
          $ref: '#/components/schemas/UUID'
          description: The ID of the reply-to address or phone number to use
          nullable: true
        rows:
          description: An array of arrays. The first line is the header and should
            include at least email address if you're sending an email template or
            phone number if you're sending a text message template. The other column
            headers should match the placeholder fields (personalised variables) of
            your template. The following lines should be your recipients' details
            and should match the order of column headers. You can have between 1 and
            50,000 recipients.
          example:
          - - email address
            - name
          - - alice@example.com
            - Alice
          - - bob@example.com
            - Bob
          items:
            items:
              type: string
            type: array
          type: array
        scheduled_for:
          description: If you want to send notifications in the future, you can specify
            a datetime up to 4 days in the future, in ISO 8601 format, UTC time.
          example: '2023-01-01T12:00:00'
          format: date-time
          nullable: true
          type: string
        template_id:
          $ref: '#/components/schemas/UUID'
      required:
      - template_id
      - name
      type: object
    PostBulkResponse:
      properties:
        data:
          properties:
            api_key:
              nullable: true
              properties:
                id:
                  $ref: '#/components/schemas/UUID'
                  description: The ID of the API key used to create the job
                key_type:
                  description: The type of API key
                  enum:
                  - normal
                  - team
                  - test
                  type: string
                name:
                  description: The name of the API key
                  type: string
              type: object
            archived:
              description: Whether the job has been archived
              type: boolean
            created_at:
              description: When the job was created
              format: date-time
              type: string
            created_by:
              properties:
                id:
                  $ref: '#/components/schemas/UUID'
                  description: The ID of the user who created the job
                name:
                  description: The name of the user who created the job
                  type: string
              type: object
            id:
              $ref: '#/components/schemas/UUID'
              description: The ID of the bulk notification job
            job_status:
              description: The status of the bulk notification job
              enum:
              - pending
              - in progress
              - finished
              - sending limits exceeded
              - scheduled
              - cancelled
              - ready to send
              - sent to dvla
              - error
              type: string
            notification_count:
              description: The number of notifications in the bulk job
              type: integer
            original_file_name:
              description: The name of the original CSV file if one was provided
              type: string
            processing_finished:
              description: When the processing of the job finished
              format: date-time
              nullable: true
              type: string
            processing_started:
              description: When the processing of the job started
              format: date-time
              nullable: true
              type: string
            scheduled_for:
              description: When the job is scheduled to be processed, null if immediate
              format: date-time
              nullable: true
              type: string
            sender_id:
              $ref: '#/components/schemas/UUID'
              description: The ID of the sender used for this job, if applicable
              nullable: true
            service:
              $ref: '#/components/schemas/UUID'
              description: The ID of the service that created the job
            service_name:
              properties:
                name:
                  description: The name of the service that created the job
                  type: string
              type: object
            template:
              $ref: '#/components/schemas/UUID'
              description: The ID of the template used for this notification job
            template_type:
              description: The type of template used for this job (email or sms)
              enum:
              - email
              - sms
              type: string
            template_version:
              description: The version of the template used for this notification
                job
              type: integer
            updated_at:
              description: When the job was last updated
              format: date-time
              nullable: true
              type: string
          required:
          - id
          - template
          - job_status
          - notification_count
          type: object
      type: object
    SmsContent:
      properties:
        body:
          description: SMS message body
          type: string
        from_number:
          description: From phone number
          type: string
      required:
      - body
      - from_number
      type: object
    Template:
      properties:
        active:
          description: Whether the template is active
          type: boolean
        body:
          description: Message body template
          type: string
        created_at:
          description: Timestamp when template was created
          format: date-time
          type: string
        created_by:
          description: User who created the template
          type: string
        description:
          description: Template description
          type: string
        id:
          $ref: '#/components/schemas/UUID'
          description: Unique identifier for the template
        name:
          description: Template name
          type: string
        personalisation:
          additionalProperties:
            oneOf:
            - description: Template variable value
              type: string
          description: Variables to substitute in the template and optional file attachments
          type: object
        subject:
          description: Subject template (for email)
          type: string
        type:
          description: Type of notification this template is for
          enum:
          - sms
          - email
          type: string
        updated_at:
          description: Timestamp when template was last updated
          format: date-time
          type: string
      required:
      - id
      - name
      - type
      - body
      - active
      - created_at
      type: object
    UUID:
      example: 123e4567-e89b-12d3-a456-426614174000
      format: uuid
      pattern: ^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$
      type: string
    ValidationError:
      properties:
        code:
          description: Error code
          type: string
        details:
          items:
            properties:
              field:
                description: Field that failed validation
                type: string
              message:
                description: Validation error message
                type: string
            required:
            - field
            - message
            type: object
          type: array
        error:
          description: Error message
          type: string
        timestamp:
          description: Timestamp when error occurred
          format: date-time
          type: string
      required:
      - error
      - code
      - details
      - timestamp
      type: object
    ValidationErrorResponse:
      properties:
        errors:
          items:
            properties:
              error:
                description: Error type
                type: string
              message:
                description: Error message
                type: string
            required:
            - error
            - message
            type: object
          type: array
        status_code:
          description: HTTP status code
          type: integer
      required:
      - status_code
      - errors
      type: object
  securitySchemes:
    apiKey:
      description: API Key with format 'ApiKey-v1 {api_key}'
      in: header
      name: Authorization
      type: apiKey
externalDocs:
  description: Find out more about using the GC Notify API
  url: https://documentation.notification.canada.ca/en/
info:
  contact:
    name: GC Notify Support
    url: https://notification.canada.ca/contact
  description: API for managing notifications and templates
  termsOfService: https://notification.canada.ca/terms
  title: Notifications API v2
  version: 1.0.0
openapi: 3.0.3
paths:
  /v2/notifications:
    get:
      description: Retrieve a paginated list of notifications with optional filtering
      operationId: getNotifications
      parameters:
      - description: Filter by template type
        in: query
        name: template_type
        required: false
        schema:
          enum:
          - sms
          - email
          type: string
      - description: Filter by notification status
        in: query
        name: status
        required: false
        schema:
          items:
            enum:
            - created
            - in-transit
            - pending
            - sent
            - delivered
            - failed
            type: string
          type: array
      - description: Reference identifier for the notification
        in: query
        name: reference
        required: false
        schema:
          format: uuid
          type: string
      - description: Filter notifications older than this notification ID (UUID)
        in: query
        name: older_than
        required: false
        schema:
          format: uuid
          type: string
      - description: Whether to include jobs in the response
        in: query
        name: include_jobs
        required: false
        schema:
          type: boolean
      responses:
        '200':
          content:
            application/json:
              schema:
                properties:
                  links:
                    $ref: '#/components/schemas/Links'
                  notifications:
                    items:
                      $ref: '#/components/schemas/Notification'
                    type: array
                type: object
          description: Successfully retrieved notifications
        '401':
          content:
            application/json:
              example:
                auth_error:
                  summary: Unauthorized access
                  value:
                    errors:
                    - error: AuthError
                      message: Unauthorized, authentication token must be provided
                    status_code: 401
              schema:
                $ref: '#/components/schemas/ValidationErrorResponse'
          description: Unauthorized
        '404':
          content:
            application/json:
              example:
                notification_not_found:
                  summary: Notification not found
                  value:
                    message: Notification not found in database
                    result: error
              schema:
                $ref: '#/components/schemas/Error'
          description: Notification not found
        '500':
          content:
            application/json:
              example:
                internal_server_error:
                  summary: Internal server error
                  value:
                    message: Internal server error
                    result: error
              schema:
                $ref: '#/components/schemas/Error'
          description: Internal server error
      security:
      - apiKey: []
      summary: Get list of notifications
      tags:
      - Notifications
  /v2/notifications/bulk:
    post:
      description: 'Send notifications in bulk, up to 50,000 recipients at a time,
        for a single template.


        You can schedule to send notifications up to 4 days in advance.

        '
      operationId: sendBulkNotifications
      requestBody:
        content:
          application/json:
            examples:
              basic_bulk_email_csv:
                summary: Basic bulk email notification using csv
                value:
                  csv: 'email address,name

                    alice@example.com,Alice

                    bob@example.com,Bob'
                  name: January Appointment Reminders
                  template_id: 12345678-1234-1234-1234-123456789012
              basic_bulk_email_rows:
                summary: Basic bulk email notification using rows
                value:
                  name: January Appointment Reminders
                  rows:
                  - - email address
                    - name
                  - - alice@example.com
                    - Alice
                  - - bob@example.com
                    - Bob
                  template_id: 12345678-1234-1234-1234-123456789012
              basic_bulk_sms_csv:
                summary: Basic bulk sms notification using csv
                value:
                  csv: 'phone number,name

                    123-456-7890,Alice

                    +112345678901,Bob'
                  name: January Appointment Reminders
                  template_id: 12345678-1234-1234-1234-123456789012
              basic_bulk_sms_rows:
                summary: Basic bulk sms notification using rows
                value:
                  name: January Appointment Reminders
                  rows:
                  - - phone number
                    - name
                  - - 123-456-7890
                    - Alice
                  - - '+112345678901'
                    - Bob
                  template_id: 12345678-1234-1234-1234-123456789012
              scheduled_bulk_with_ref:
                summary: Scheduled bulk notifications with a ref for tracking and
                  reply to address
                value:
                  name: January Appointment Reminders
                  reference: january-reminders
                  reply_to_id: 12345678-1234-1234-1234-123456789012
                  rows:
                  - - email address
                    - name
                  - - alice@example.com
                    - Alice
                  - - bob@example.com
                    - Bob
                  scheduled_for: '2025-06-25T15:15:00'
                  template_id: 12345678-1234-1234-1234-123456789012
            schema:
              $ref: '#/components/schemas/PostBulkRequest'
        required: true
      responses:
        '201':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PostBulkResponse'
          description: Bulk job created successfully
        '400':
          content:
            application/json:
              examples:
                daily_limit_exceeded:
                  summary: Daily limit exceeded
                  value:
                    errors:
                    - error: BadRequestError
                      message: You only have 50 remaining messages before you reach
                        your daily limit. You've tried to send 75 messages.
                    status_code: 400
                duplicate_column_headers:
                  summary: Duplicate column headers
                  value:
                    errors:
                    - error: BadRequestError
                      message: 'Duplicate column headers: name, NAME'
                    status_code: 400
                missing_column_headers:
                  summary: Missing column headers
                  value:
                    errors:
                    - error: BadRequestError
                      message: 'Missing column headers: name'
                    status_code: 400
                missing_name:
                  summary: Name is required
                  value:
                    errors:
                    - error: ValidationError
                      message: name is a required property
                    status_code: 400
                missing_rows_or_csv:
                  summary: Must specify rows or csv
                  value:
                    errors:
                    - error: BadRequestError
                      message: You should specify either rows or csv
                    status_code: 400
                row_errors:
                  summary: Row errors
                  value:
                    errors:
                    - error: BadRequestError
                      message: 'Some rows have errors. Row 1 - name: Missing. Row
                        2 - email address: invalid recipient. Row 3 - name: Missing.
                        Row 4 - name: Missing.'
                    status_code: 400
                scheduled_for_invalid_format:
                  summary: scheduled_for invalid format
                  value:
                    errors:
                    - error: ValidationError
                      message: scheduled_for datetime format is invalid. It must be
                        a valid ISO8601 date time format, https://en.wikipedia.org/wiki/ISO_8601
                    status_code: 400
                scheduled_for_past:
                  summary: scheduled_for in the past
                  value:
                    errors:
                    - error: ValidationError
                      message: scheduled_for datetime cannot be in the past
                    status_code: 400
                scheduled_for_too_far:
                  summary: scheduled_for too far in future
                  value:
                    errors:
                    - error: ValidationError
                      message: scheduled_for datetime can only be up to 96 hours in
                        the future
                    status_code: 400
                scheduled_for_wrong_type:
                  summary: scheduled_for wrong type
                  value:
                    errors:
                    - error: ValidationError
                      message: scheduled_for 42 is not of type string, null
                    status_code: 400
                service_not_allowed:
                  summary: Service not allowed to send emails
                  value:
                    errors:
                    - error: BadRequestError
                      message: Service is not allowed to send emails
                    status_code: 400
                team_safelist_api_key:
                  summary: Team and safelist API key restriction
                  value:
                    errors:
                    - error: BadRequestError
                      message: You cannot send to these recipients because you used
                        a team and safelist API key.
                    status_code: 400
                template_deleted:
                  summary: Template deleted
                  value:
                    errors:
                    - error: BadRequestError
                      message: Template has been deleted
                    status_code: 400
                template_not_found:
                  summary: Template not found
                  value:
                    errors:
                    - error: BadRequestError
                      message: Template not found
                    status_code: 400
                too_many_rows:
                  summary: Too many rows
                  value:
                    errors:
                    - error: BadRequestError
                      message: Too many rows. Maximum number of rows allowed is 50000
                    status_code: 400
                trial_mode_restriction:
                  summary: Trial mode restriction
                  value:
                    errors:
                    - error: BadRequestError
                      message: You cannot send to these recipients because your service
                        is in trial mode. You can only send to members of your team
                        and your safelist.
                    status_code: 400
              schema:
                $ref: '#/components/schemas/ValidationErrorResponse'
          description: Bad Request
        '500':
          content:
            application/json:
              examples:
                internal_server_error:
                  summary: Internal server error
                  value:
                    message: Internal server error
                    result: error
              schema:
                $ref: '#/components/schemas/Error'
          description: Internal server error
      security:
      - apiKey: []
      summary: Send a batch of notifications
      tags:
      - Notifications
  /v2/notifications/email:
    post:
      description: Create and send an email notification
      operationId: sendEmailNotification
      requestBody:
        content:
          application/json:
            examples:
              basic_email:
                summary: Basic email notification
                value:
                  email_address: user@example.com
                  template_id: 12345678-1234-1234-1234-123456789012
              scheduled_email:
                summary: Scheduled email notification
                value:
                  email_address: user@example.com
                  scheduled_for: '2025-06-25T15:15:00'
                  template_id: 12345678-1234-1234-1234-123456789012
              with_file_attachment:
                summary: Email with file attachments
                value:
                  email_address: user@example.com
                  personalisation:
                    application_file:
                      file: file as base64 encoded string
                      filename: your_custom_filename.txt
                      sending_method: attach
                    other_file:
                      file: other file as base64 encoded string
                      filename: file2.txt
                      sending_method: attach
                  template_id: 12345678-1234-1234-1234-123456789012
              with_file_link:
                summary: Email with file link
                value:
                  email_address: user@example.com
                  personalisation:
                    link_to_file:
                      file: file as base64 encoded string
                      filename: your_custom_filename.pdf
                      sending_method: link
                  template_id: 12345678-1234-1234-1234-123456789012
              with_personalisation:
                summary: Email with personalisation placeholder
                value:
                  email_address: user@example.com
                  personalisation:
                    first_name: John
                    last_name: Doe
                  template_id: 12345678-1234-1234-1234-123456789012
            schema:
              $ref: '#/components/schemas/CreateEmailNotificationRequest'
        required: true
      responses:
        '201':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/NotificationResponse'
          description: Email notification created successfully
        '400':
          content:
            application/json:
              examples:
                base64_decode_error:
                  summary: Base64 decoding error
                  value:
                    errors:
                    - error: ValidationError
                      message: 'application_file : Incorrect padding : Error decoding
                        base64 field'
                    status_code: 400
                filename_too_long:
                  summary: Filename too long
                  value:
                    errors:
                    - error: ValidationError
                      message: filename is too long
                    status_code: 400
                filename_too_short:
                  summary: Filename too short
                  value:
                    errors:
                    - error: ValidationError
                      message: filename is too short
                    status_code: 400
                invalid_sending_method:
                  summary: Invalid sending method
                  value:
                    errors:
                    - error: ValidationError
                      message: personalisation application_file sending_method is
                        not one of [attach, link]
                    status_code: 400
                missing_filename:
                  summary: Missing filename
                  value:
                    errors:
                    - error: ValidationError
                      message: filename is a required property
                    status_code: 400
                missing_sending_method:
                  summary: Missing sending method
                  value:
                    errors:
                    - error: ValidationError
                      message: sending_method is a required property
                    status_code: 400
                team_api_key_error:
                  summary: Team API key restriction
                  value:
                    errors:
                    - error: BadRequestError
                      message: Can't send to this recipient using a team-only API
                        key
                    status_code: 400
                trial_mode_error:
                  summary: Service in trial mode
                  value:
                    errors:
                    - error: BadRequestError
                      message: Can't send to this recipient when service is in trial
                        mode
                    status_code: 400
                unsupported_file_type:
                  summary: Unsupported file type
                  value:
                    errors:
                    - error: BadRequestError
                      message: 'Unsupported file type ''exe''. Supported types are:
                        ''pdf, csv, txt, jpeg, png, doc, docx, xls, xlsx, rtf, odt'''
                    status_code: 400
                virus_scan_failed:
                  summary: File failed virus scan
                  value:
                    errors:
                    - error: BadRequestError
                      message: File did not pass the virus scan
                    status_code: 400
              schema:
                $ref: '#/components/schemas/ValidationErrorResponse'
          description: Bad request - various validation and business rule errors
        '401':
          content:
            application/json:
              example:
                message: Unauthorized
                result: error
              schema:
                $ref: '#/components/schemas/Error'
          description: Unauthorized
        '403':
          content:
            application/json:
              examples:
                invalid_api_key:
                  summary: Invalid API key
                  value:
                    errors:
                    - error: AuthError
                      message: 'Invalid token: Enter your full API key'
                    status_code: 403
                system_clock_error:
                  summary: System clock not accurate
                  value:
                    errors:
                    - error: AuthError
                      message: 'Error: Your system clock must be accurate to within
                        30 seconds'
                    status_code: 403
              schema:
                $ref: '#/components/schemas/ValidationErrorResponse'
          description: Forbidden - authentication or authorization errors
        '429':
          content:
            application/json:
              examples:
                rate_limit_exceeded:
                  summary: Rate limit exceeded
                  value:
                    errors:
                    - error: RateLimitError
                      message: Exceeded rate limit for key type LIVE of 1000 requests
                        per 60 seconds
                    status_code: 429
                send_limit_exceeded:
                  summary: Daily send limit exceeded
                  value:
                    errors:
                    - error: TooManyRequestsError
                      message: Exceeded send limits (250000) for today
                    status_code: 429
              schema:
                $ref: '#/components/schemas/ValidationErrorResponse'
          description: Too many requests - rate limiting
        '500':
          content:
            application/json:
              examples:
                internal_server_error:
                  summary: Internal server error
                  value:
                    message: Internal server error
                    result: error
              schema:
                $ref: '#/components/schemas/Error'
          description: Internal server error
      security:
      - apiKey: []
      summary: Send an email notification
      tags:
      - Notifications
  /v2/notifications/sms:
    post:
      description: Create and send an SMS notification
      operationId: sendSmsNotification
      requestBody:
        content:
          application/json:
            examples:
              basic_sms:
                summary: Basic SMS notification
                value:
                  phone_number: '+1234567890'
                  template_id: 12345678-1234-1234-1234-123456789012
              scheduled_sms:
                summary: Scheduled SMS notification
                value:
                  phone_number: '+1234567890'
                  scheduled_for: '2025-06-25T15:15:00'
                  template_id: 12345678-1234-1234-1234-123456789012
              sms_with_personalisation:
                summary: SMS with personalisation placeholder
                value:
                  personalisation:
                    first_name: John
                    last_name: Doe
                  phone_number: '+1234567890'
                  template_id: 12345678-1234-1234-1234-123456789012
            schema:
              $ref: '#/components/schemas/CreateSmsNotificationRequest'
        required: true
      responses:
        '201':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/NotificationResponse'
          description: SMS notification created successfully
        '400':
          content:
            application/json:
              examples:
                team_api_key_error:
                  summary: Team API key restriction
                  value:
                    errors:
                    - error: BadRequestError
                      message: Can't send to this recipient using a team-only API
                        key
                    status_code: 400
                trial_mode_error:
                  summary: Service in trial mode
                  value:
                    errors:
                    - error: BadRequestError
                      message: Can't send to this recipient when service is in trial
                        mode
                    status_code: 400
              schema:
                $ref: '#/components/schemas/ValidationErrorResponse'
          description: Bad request - various validation and business rule errors
        '403':
          content:
            application/json:
              examples:
                invalid_api_key:
                  summary: Invalid API key
                  value:
                    errors:
                    - error: AuthError
                      message: 'Invalid token: Enter your full API key'
                    status_code: 403
                system_clock_error:
                  summary: System clock not accurate
                  value:
                    errors:
                    - error: AuthError
                      message: 'Error: Your system clock must be accurate to within
                        30 seconds'
                    status_code: 403
              schema:
                $ref: '#/components/schemas/ValidationErrorResponse'
          description: Forbidden - authentication or authorization errors
        '429':
          content:
            application/json:
              examples:
                rate_limit_exceeded:
                  summary: Rate limit exceeded
                  value:
                    errors:
                    - error: RateLimitError
                      message: Exceeded rate limit for key type TEAM/TEST/LIVE of
                        1000 requests per 60 seconds
                    status_code: 429
                send_limit_exceeded:
                  summary: Daily send limit exceeded
                  value:
                    errors:
                    - error: TooManyRequestsError
                      message: Exceeded send limits (LIMIT NUMBER) for today
                    status_code: 429
              schema:
                $ref: '#/components/schemas/ValidationErrorResponse'
          description: Too many requests - rate limiting
        '500':
          content:
            application/json:
              example:
                internal_server_error:
                  summary: Internal server error
                  value:
                    message: Internal server error
                    result: error
              schema:
                $ref: '#/components/schemas/Error'
          description: Internal server error
      security:
      - apiKey: []
      summary: Send an SMS notification
      tags:
      - Notifications
  /v2/notifications/{notification-id}:
    get:
      description: Retrieve a specific notification by its ID
      operationId: getNotificationById
      parameters:
      - description: Unique identifier for the notification
        in: path
        name: notification-id
        required: true
        schema:
          format: uuid
          type: string
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Notification'
          description: Notification retrieved successfully
        '400':
          content:
            application/json:
              example:
                errors:
                - error: ValidationError
                  message: notification_id is not a valid UUID
                status_code: 400
              schema:
                $ref: '#/components/schemas/ValidationErrorResponse'
          description: Bad request - invalid notification ID format
        '401':
          content:
            application/json:
              example:
                auth_error:
                  summary: Unauthorized access
                  value:
                    errors:
                    - error: AuthError
                      message: Unauthorized, authentication token must be provided
                    status_code: 401
              schema:
                $ref: '#/components/schemas/ValidationErrorResponse'
          description: Unauthorized
        '403':
          content:
            application/json:
              examples:
                invalid_api_key:
                  summary: Invalid API key
                  value:
                    errors:
                    - error: AuthError
                      message: 'Invalid token: Enter your full API key'
                    status_code: 403
                system_clock_error:
                  summary: System clock not accurate
                  value:
                    errors:
                    - error: AuthError
                      message: 'Error: Your system clock must be accurate to within
                        30 seconds'
                    status_code: 403
              schema:
                $ref: '#/components/schemas/ValidationErrorResponse'
          description: Forbidden - authentication or authorization errors
        '404':
          content:
            application/json:
              example:
                notification_not_found:
                  summary: Notification not found
                  value:
                    message: Notification not found in database
                    result: error
              schema:
                $ref: '#/components/schemas/Error'
          description: Notification not found
        '500':
          content:
            application/json:
              examples:
                internal_server_error:
                  summary: Internal server error
                  value:
                    message: Internal server error
                    result: error
              schema:
                $ref: '#/components/schemas/Error'
          description: Internal server error
      security:
      - apiKey: []
      summary: Get notification by ID
      tags:
      - Notifications
  /v2/template/{template-id}:
    get:
      description: Retrieve a specific template by its ID
      operationId: getTemplate
      parameters:
      - description: Unique identifier for the template
        in: path
        name: template-id
        required: true
        schema:
          format: uuid
          type: string
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Template'
          description: Template retrieved successfully
        '400':
          content:
            application/json:
              example:
                errors:
                - error: ValidationError
                  message: template_id is not a valid UUID
                status_code: 400
              schema:
                $ref: '#/components/schemas/ValidationErrorResponse'
          description: Bad request - invalid template ID format
        '401':
          content:
            application/json:
              example:
                auth_error:
                  summary: Unauthorized access
                  value:
                    errors:
                    - error: AuthError
                      message: Unauthorized, authentication token must be provided
                    status_code: 401
              schema:
                $ref: '#/components/schemas/ValidationErrorResponse'
          description: Unauthorized
        '403':
          content:
            application/json:
              examples:
                invalid_api_key:
                  summary: Invalid API key
                  value:
                    errors:
                    - error: AuthError
                      message: 'Invalid token: Enter your full API key'
                    status_code: 403
                system_clock_error:
                  summary: System clock not accurate
                  value:
                    errors:
                    - error: AuthError
                      message: 'Error: Your system clock must be accurate to within
                        30 seconds'
                    status_code: 403
              schema:
                $ref: '#/components/schemas/Error'
          description: Forbidden - authentication or authorization errors
        '404':
          content:
            application/json:
              example:
                template_not_found:
                  summary: Template not found
                  value:
                    message: Template not found in database
                    result: error
              schema:
                $ref: '#/components/schemas/Error'
          description: Template not found
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
          description: Internal server error
      security:
      - apiKey: []
      summary: Get template by ID
      tags:
      - Templates
  /v2/templates:
    get:
      description: Retrieve a list of templates. Filterable by template type
      operationId: getTemplates
      parameters:
      - description: Filter by template type
        in: query
        name: type
        required: false
        schema:
          enum:
          - sms
          - email
          type: string
      responses:
        '200':
          content:
            application/json:
              schema:
                properties:
                  templates:
                    items:
                      $ref: '#/components/schemas/Template'
                    type: array
                type: object
          description: Successfully retrieved templates
        '400':
          content:
            application/json:
              example:
                bad_request:
                  value:
                    errors:
                    - error: ValidationError
                      message: Unauthorized, authentication token must be provided
                    status_code: 400
              schema:
                $ref: '#/components/schemas/Error'
          description: Bad request - invalid parameters
        '401':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
          description: Unauthorized
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
          description: Internal server error
      security:
      - apiKey: []
      summary: Get list of templates
      tags:
      - Templates
servers:
- description: GC Notify API server
  url: https://api.notification.canada.ca/
tags:
- description: Operations related to notifications
  name: Notifications
- description: Operations related to notification templates
  name: Templates
